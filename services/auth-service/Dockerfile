# Dockerfile в папке /auth-service

# 1. Выбираем базовый образ. Мы берем официальный образ Node.js версии 18.
FROM node:18-alpine

# 2. Устанавливаем рабочую директорию внутри контейнера.
# Все последующие команды будут выполняться в /app.
WORKDIR /app

# 3. Копируем файлы package.json и package-lock.json.
# Звездочка (*) означает, что мы копируем оба файла.
# Это делается для кэширования: если зависимости не менялись, Docker не будет их переустанавливать.
COPY package*.json ./

# 4. Устанавливаем зависимости, которые описаны в package.json.
RUN npm install

# 5. Копируем весь остальной код нашего приложения в рабочую директорию.
COPY . .

# 6. "Открываем" порт 3000 контейнера, чтобы к нему можно было подключиться снаружи.
EXPOSE 3000

# 7. Команда, которая будет запущена при старте контейнера.
CMD ["node", "index.js"]